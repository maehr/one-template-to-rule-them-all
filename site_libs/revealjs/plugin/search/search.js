(function(l,t){typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof define=="function"&&define.amd?define(t):(l=typeof globalThis<"u"?globalThis:l||self).RevealSearch=t()})(this,function(){"use strict";/*!
	 * Handles finding a text string anywhere in the slides and showing the next occurrence to the user
	 * by navigatating to that slide and highlighting it.
	 *
	 * @author Jon Snyder <snyder.jon@gmail.com>, February 2013
	 */return()=>{let l,t,n,r,s,y,d;function g(){t=document.createElement("div"),t.classList.add("searchbox"),t.style.position="absolute",t.style.top="10px",t.style.right="10px",t.style.zIndex=10,t.innerHTML=`<input type="search" class="searchinput" placeholder="Search..." style="vertical-align: top;"/>
		</span>`,n=t.querySelector(".searchinput"),n.style.width="240px",n.style.fontSize="14px",n.style.padding="4px 6px",n.style.color="#000",n.style.background="#fff",n.style.borderRadius="2px",n.style.border="0",n.style.outline="0",n.style.boxShadow="0 2px 18px rgba(0, 0, 0, 0.2)",n.style["-webkit-appearance"]="none",l.getRevealElement().appendChild(t),n.addEventListener("keyup",function(c){c.keyCode===13?(c.preventDefault(),function(){if(y){var i=n.value;i===""?(d&&d.remove(),r=null):(d=new w("slidecontent"),r=d.apply(i),s=0)}r&&(r.length&&r.length<=s&&(s=0),r.length>s&&(l.slide(r[s].h,r[s].v),s++))}(),y=!1):y=!0},!1),S()}function C(){t||g(),t.style.display="inline",n.focus(),n.select()}function S(){t||g(),t.style.display="none",d&&d.remove()}function w(c,i){var T=document.getElementById(c)||document.body,m=i||"EM",L=new RegExp("^(?:"+m+"|SCRIPT|FORM)$"),E=["#ff6","#a0ffff","#9f9","#f99","#f6f"],v=[],k=0,h="",f=[];this.setRegex=function(e){e=e.trim(),h=new RegExp("("+e+")","i")},this.getRegex=function(){return h.toString().replace(/^\/\\b\(|\)\\b\/i$/g,"").replace(/\|/g," ")},this.hiliteWords=function(e){if(e!=null&&e&&h&&!L.test(e.nodeName)){if(e.hasChildNodes())for(var o=0;o<e.childNodes.length;o++)this.hiliteWords(e.childNodes[o]);var N,a;if(e.nodeType==3&&(N=e.nodeValue)&&(a=h.exec(N))){for(var p=e;p!=null&&p.nodeName!="SECTION";)p=p.parentNode;var x=l.getIndices(p),I=f.length,R=!1;for(o=0;o<I;o++)f[o].h===x.h&&f[o].v===x.v&&(R=!0);R||f.push(x),v[a[0].toLowerCase()]||(v[a[0].toLowerCase()]=E[k++%E.length]);var u=document.createElement(m);u.appendChild(document.createTextNode(a[0])),u.style.backgroundColor=v[a[0].toLowerCase()],u.style.fontStyle="inherit",u.style.color="#000";var b=e.splitText(a.index);b.nodeValue=b.nodeValue.substring(a[0].length),e.parentNode.insertBefore(u,b)}}},this.remove=function(){for(var e,o=document.getElementsByTagName(m);o.length&&(e=o[0]);)e.parentNode.replaceChild(e.firstChild,e)},this.apply=function(e){if(e!=null&&e)return this.remove(),this.setRegex(e),this.hiliteWords(T),f}}return{id:"search",init:c=>{l=c,l.registerKeyboardShortcut("CTRL + Shift + F","Search"),document.addEventListener("keydown",function(i){i.key=="F"&&(i.ctrlKey||i.metaKey)&&(i.preventDefault(),t||g(),t.style.display!=="inline"?C():S())},!1)},open:C}}});
